<div class="bg-white shadow rounded-lg p-4 h-full">
  <h2 class="text-lg font-semibold text-gray-900 mb-4">Navigation</h2>

  {{#if projects.length}}
    <div class="mb-4">
      <label for="project-select" class="block text-sm font-medium text-gray-700 mb-2">
        Project
      </label>
      <select
        id="project-select"
        hx-get="/api/sidebar"
        hx-target="#sidebar-content"
        hx-swap="innerHTML"
        hx-include="this"
        name="projectId"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      >
        {{#each projects}}
          <option value="{{id}}">
            {{name}}
          </option>
        {{/each}}
      </select>
    </div>

    <div id="sidebar-content">
      {{#if navigation.length}}
        <nav class="space-y-2">
          {{#each navigation}}
            <div class="border-l-2 border-gray-200 pl-2">
              <div class="text-sm font-medium text-gray-900 mb-1">{{name}}</div>
              {{#each rooms}}
                <div class="ml-2 mb-2">
                  <div class="text-sm font-medium text-gray-700 mb-1">{{name}}</div>
                  <div class="ml-2 space-y-1">
                    {{#each keypads}}
                      <button
                        hx-get="/api/keypad/{{id}}"
                        hx-target="#main-content"
                        hx-swap="innerHTML"
                        class="w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-700 rounded"
                      >
                        Gang {{wallplate.gangPosition}}
                      </button>
                    {{/each}}
                  </div>
                </div>
              {{/each}}
            </div>
          {{/each}}
        </nav>
      {{else}}
        <p class="text-sm text-gray-500">No keypads found in this project.</p>
      {{/if}}
    </div>
  {{else}}
    <p class="text-sm text-gray-500">No projects available. Please import a configuration first.</p>
    <a href="/" class="mt-4 inline-block text-sm text-blue-600 hover:text-blue-800">
      Import Configuration â†’
    </a>
  {{/if}}
</div>
