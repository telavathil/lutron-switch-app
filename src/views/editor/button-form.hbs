<div class="animate-fade-in">
  <form
    hx-post="/button/{{button.id}}"
    hx-target="#main-content"
    hx-swap="innerHTML"
    style="display: flex; flex-direction: column; gap: 2rem;"
  >
    <div>
      <h3 style="
        font-family: var(--font-display);
        font-size: 24px;
        font-weight: 300;
        letter-spacing: 0.08em;
        color: var(--color-white);
        margin: 0 0 0.5rem 0;
      ">
        Button {{button.position}}
      </h3>
      <div style="
        height: 1px;
        background: linear-gradient(to right, var(--color-amber), transparent);
        margin-bottom: 2rem;
      "></div>
    </div>

    <div>
      <label style="
        display: block;
        font-family: var(--font-technical);
        font-size: 10px;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: var(--color-silver);
        margin-bottom: 0.75rem;
      ">
        Button Label
      </label>
      <input
        type="text"
        name="label"
        value="{{button.engraving.label}}"
        required
        style="
          width: 100%;
          background: var(--color-slate);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 2px;
          padding: 1rem 1.25rem;
          font-family: var(--font-technical);
          font-size: 13px;
          color: var(--color-pearl);
          letter-spacing: 0.02em;
          transition: all 0.3s ease;
        "
        onfocus="this.style.borderColor='var(--color-amber)'; this.style.boxShadow='0 0 0 3px var(--color-glow)'"
        onblur="this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.boxShadow='none'"
      />
    </div>

    <div>
      <label style="
        display: block;
        font-family: var(--font-technical);
        font-size: 10px;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: var(--color-silver);
        margin-bottom: 0.75rem;
      ">
        Button Type
      </label>
      <div style="
        font-family: var(--font-technical);
        font-size: 13px;
        color: var(--color-pearl);
        padding: 1rem 1.25rem;
        background: var(--color-carbon);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 2px;
      ">
        {{#if (eq button.logic.type 'toggle')}}
          Toggle
        {{else}}
          Single Action
        {{/if}}
      </div>
    </div>

    <div>
      <label style="
        display: block;
        font-family: var(--font-technical);
        font-size: 10px;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: var(--color-silver);
        margin-bottom: 0.75rem;
      ">
        LED Logic Type
      </label>
      <select
        name="logic.ledLogicType"
        style="
          width: 100%;
          background: var(--color-slate);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 2px;
          padding: 1rem 1.25rem;
          font-family: var(--font-technical);
          font-size: 13px;
          color: var(--color-pearl);
          cursor: pointer;
          transition: all 0.3s ease;
        "
        onfocus="this.style.borderColor='var(--color-amber)'; this.style.boxShadow='0 0 0 3px var(--color-glow)'"
        onblur="this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.boxShadow='none'"
      >
        <option value="scene" {{#if (eq button.logic.ledLogic.type 'scene')}}selected{{/if}}>Scene</option>
        <option value="room" {{#if (eq button.logic.ledLogic.type 'room')}}selected{{/if}}>Room</option>
        <option value="local-load" {{#if (eq button.logic.ledLogic.type 'local-load')}}selected{{/if}}>Local Load</option>
      </select>
    </div>

    {{#if button.logic.ledLogic.sceneNumber}}
      <div>
        <label style="
          display: block;
          font-family: var(--font-technical);
          font-size: 10px;
          letter-spacing: 0.15em;
          text-transform: uppercase;
          color: var(--color-silver);
          margin-bottom: 0.75rem;
        ">
          Scene Number
        </label>
        <input
          type="number"
          name="logic.sceneNumber"
          value="{{button.logic.ledLogic.sceneNumber}}"
          style="
            width: 100%;
            background: var(--color-slate);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            padding: 1rem 1.25rem;
            font-family: var(--font-technical);
            font-size: 13px;
            color: var(--color-pearl);
            transition: all 0.3s ease;
          "
          onfocus="this.style.borderColor='var(--color-amber)'; this.style.boxShadow='0 0 0 3px var(--color-glow)'"
          onblur="this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.boxShadow='none'"
        />
      </div>
    {{/if}}

    <!-- Toggle Button Actions -->
    {{#if (eq button.logic.type 'toggle')}}
      <!-- On Actions -->
      <div>
        <div style="
          font-family: var(--font-technical);
          font-size: 11px;
          font-weight: 500;
          letter-spacing: 0.15em;
          text-transform: uppercase;
          color: var(--color-silver);
          margin-bottom: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        ">
          <span style="
            display: inline-block;
            width: 6px;
            height: 6px;
            background: #81c995;
            border-radius: 50%;
          "></span>
          On Actions (Toggle)
        </div>
        <div id="on-actions">
          {{#each button.logic.actions.on}}
            <div style="
              background: var(--color-carbon);
              border: 1px solid rgba(129, 201, 149, 0.1);
              border-radius: 2px;
              padding: 1rem 1.25rem;
              margin-bottom: 0.75rem;
            ">
              <div style="margin-bottom: 1rem;">
                <label style="
                  display: block;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: var(--color-silver);
                  margin-bottom: 0.5rem;
                ">Load Path</label>
                <select
                  name="logic.onActions[{{@index}}].loadFullPath"
                  required
                  style="
                    width: 100%;
                    background: var(--color-slate);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 2px;
                    padding: 0.75rem 1rem;
                    font-family: var(--font-technical);
                    font-size: 11px;
                    color: var(--color-pearl);
                    cursor: pointer;
                  "
                  onfocus="this.style.borderColor='#81c995'; this.style.boxShadow='0 0 0 2px rgba(129, 201, 149, 0.1)'"
                  onblur="this.style.borderColor='rgba(255, 255, 255, 0.08)'; this.style.boxShadow='none'"
                >
                  {{#each ../allLoads}}
                    <option value="{{this.fullPath}}" {{#if (eq this.fullPath ../loadFullPath)}}selected{{/if}} style="background: var(--color-slate); color: var(--color-pearl);">
                      {{this.location.area}} › {{this.location.room}} › {{this.zone}}
                    </option>
                  {{/each}}
                </select>
              </div>
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Level (%)</label>
                  <input
                    type="number"
                    name="logic.onActions[{{@index}}].commandLevel"
                    value="{{commandLevel}}"
                    min="0"
                    max="100"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Fade (s)</label>
                  <input
                    type="number"
                    name="logic.onActions[{{@index}}].fadeTime"
                    value="{{fadeTime}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Delay (s)</label>
                  <input
                    type="number"
                    name="logic.onActions[{{@index}}].delay"
                    value="{{delay}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
              </div>
              <button
                type="button"
                onclick="this.parentElement.remove()"
                style="
                  margin-top: 0.75rem;
                  background: rgba(255, 77, 77, 0.1);
                  border: 1px solid rgba(255, 77, 77, 0.3);
                  border-radius: 2px;
                  padding: 0.5rem 1rem;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: #ff6b6b;
                  cursor: pointer;
                  transition: all 0.2s ease;
                "
              >
                Remove
              </button>
            </div>
          {{/each}}
        </div>
        <button
          type="button"
          hx-get="/button/{{button.id}}/add-on-action"
          hx-target="#on-actions"
          hx-swap="beforeend"
          style="
            width: 100%;
            background: rgba(129, 201, 149, 0.1);
            border: 1px solid rgba(129, 201, 149, 0.3);
            border-radius: 2px;
            padding: 0.75rem;
            font-family: var(--font-technical);
            font-size: 10px;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: #81c995;
            cursor: pointer;
            transition: all 0.2s ease;
          "
          onmouseover="this.style.background='rgba(129, 201, 149, 0.2)'"
          onmouseout="this.style.background='rgba(129, 201, 149, 0.1)'"
        >
          + Add On Action
        </button>
      </div>

      <!-- Off Actions -->
      <div>
        <div style="
          font-family: var(--font-technical);
          font-size: 11px;
          font-weight: 500;
          letter-spacing: 0.15em;
          text-transform: uppercase;
          color: var(--color-silver);
          margin-bottom: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        ">
          <span style="
            display: inline-block;
            width: 6px;
            height: 6px;
            background: #4a4a4a;
            border-radius: 50%;
          "></span>
          Off Actions (Toggle)
        </div>
        <div id="off-actions">
          {{#each button.logic.actions.off}}
            <div style="
              background: var(--color-carbon);
              border: 1px solid rgba(74, 74, 74, 0.1);
              border-radius: 2px;
              padding: 1rem 1.25rem;
              margin-bottom: 0.75rem;
            ">
              <div style="margin-bottom: 1rem;">
                <label style="
                  display: block;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: var(--color-silver);
                  margin-bottom: 0.5rem;
                ">Load Path</label>
                <select
                  name="logic.offActions[{{@index}}].loadFullPath"
                  required
                  style="
                    width: 100%;
                    background: var(--color-slate);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 2px;
                    padding: 0.75rem 1rem;
                    font-family: var(--font-technical);
                    font-size: 11px;
                    color: var(--color-pearl);
                    cursor: pointer;
                  "
                  onfocus="this.style.borderColor='#9a9a9a'; this.style.boxShadow='0 0 0 2px rgba(74, 74, 74, 0.1)'"
                  onblur="this.style.borderColor='rgba(255, 255, 255, 0.08)'; this.style.boxShadow='none'"
                >
                  {{#each ../allLoads}}
                    <option value="{{this.fullPath}}" {{#if (eq this.fullPath ../loadFullPath)}}selected{{/if}} style="background: var(--color-slate); color: var(--color-pearl);">
                      {{this.location.area}} › {{this.location.room}} › {{this.zone}}
                    </option>
                  {{/each}}
                </select>
              </div>
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Level (%)</label>
                  <input
                    type="number"
                    name="logic.offActions[{{@index}}].commandLevel"
                    value="{{commandLevel}}"
                    min="0"
                    max="100"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Fade (s)</label>
                  <input
                    type="number"
                    name="logic.offActions[{{@index}}].fadeTime"
                    value="{{fadeTime}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Delay (s)</label>
                  <input
                    type="number"
                    name="logic.offActions[{{@index}}].delay"
                    value="{{delay}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
              </div>
              <button
                type="button"
                onclick="this.parentElement.remove()"
                style="
                  margin-top: 0.75rem;
                  background: rgba(255, 77, 77, 0.1);
                  border: 1px solid rgba(255, 77, 77, 0.3);
                  border-radius: 2px;
                  padding: 0.5rem 1rem;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: #ff6b6b;
                  cursor: pointer;
                  transition: all 0.2s ease;
                "
              >
                Remove
              </button>
            </div>
          {{/each}}
        </div>
        <button
          type="button"
          hx-get="/button/{{button.id}}/add-off-action"
          hx-target="#off-actions"
          hx-swap="beforeend"
          style="
            width: 100%;
            background: rgba(74, 74, 74, 0.1);
            border: 1px solid rgba(74, 74, 74, 0.3);
            border-radius: 2px;
            padding: 0.75rem;
            font-family: var(--font-technical);
            font-size: 10px;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: #9a9a9a;
            cursor: pointer;
            transition: all 0.2s ease;
          "
          onmouseover="this.style.background='rgba(74, 74, 74, 0.2)'"
          onmouseout="this.style.background='rgba(74, 74, 74, 0.1)'"
        >
          + Add Off Action
        </button>
      </div>
    {{/if}}

    <!-- Single Action Button Actions -->
    {{#if (eq button.logic.type 'single-action')}}
      <!-- Press Actions -->
      <div>
        <div style="
          font-family: var(--font-technical);
          font-size: 11px;
          font-weight: 500;
          letter-spacing: 0.15em;
          text-transform: uppercase;
          color: var(--color-silver);
          margin-bottom: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        ">
          <span style="
            display: inline-block;
            width: 6px;
            height: 6px;
            background: var(--color-amber);
            border-radius: 50%;
          "></span>
          Press Actions
        </div>
        <div id="press-actions">
          {{#each button.logic.actions.press}}
            <div style="
              background: var(--color-carbon);
              border: 1px solid rgba(255, 255, 255, 0.05);
              border-radius: 2px;
              padding: 1rem 1.25rem;
              margin-bottom: 0.75rem;
            ">
              <div style="margin-bottom: 1rem;">
                <label style="
                  display: block;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: var(--color-silver);
                  margin-bottom: 0.5rem;
                ">Load Path</label>
                <select
                  name="logic.pressActions[{{@index}}].loadFullPath"
                  required
                  style="
                    width: 100%;
                    background: var(--color-slate);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 2px;
                    padding: 0.75rem 1rem;
                    font-family: var(--font-technical);
                    font-size: 11px;
                    color: var(--color-pearl);
                    cursor: pointer;
                  "
                  onfocus="this.style.borderColor='var(--color-amber)'; this.style.boxShadow='0 0 0 2px rgba(255, 255, 255, 0.05)'"
                  onblur="this.style.borderColor='rgba(255, 255, 255, 0.08)'; this.style.boxShadow='none'"
                >
                  {{#each ../allLoads}}
                    <option value="{{this.fullPath}}" {{#if (eq this.fullPath ../loadFullPath)}}selected{{/if}} style="background: var(--color-slate); color: var(--color-pearl);">
                      {{this.location.area}} › {{this.location.room}} › {{this.zone}}
                    </option>
                  {{/each}}
                </select>
              </div>
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Level (%)</label>
                  <input
                    type="number"
                    name="logic.pressActions[{{@index}}].commandLevel"
                    value="{{commandLevel}}"
                    min="0"
                    max="100"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Fade (s)</label>
                  <input
                    type="number"
                    name="logic.pressActions[{{@index}}].fadeTime"
                    value="{{fadeTime}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Delay (s)</label>
                  <input
                    type="number"
                    name="logic.pressActions[{{@index}}].delay"
                    value="{{delay}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
              </div>
              <button
                type="button"
                onclick="this.parentElement.remove()"
                style="
                  margin-top: 0.75rem;
                  background: rgba(255, 77, 77, 0.1);
                  border: 1px solid rgba(255, 77, 77, 0.3);
                  border-radius: 2px;
                  padding: 0.5rem 1rem;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: #ff6b6b;
                  cursor: pointer;
                  transition: all 0.2s ease;
                "
              >
                Remove
              </button>
            </div>
          {{/each}}
        </div>
        <button
          type="button"
          hx-get="/button/{{button.id}}/add-press-action"
          hx-target="#press-actions"
          hx-swap="beforeend"
          style="
            width: 100%;
            background: rgba(255, 184, 77, 0.1);
            border: 1px solid rgba(255, 184, 77, 0.3);
            border-radius: 2px;
            padding: 0.75rem;
            font-family: var(--font-technical);
            font-size: 10px;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--color-amber);
            cursor: pointer;
            transition: all 0.2s ease;
          "
          onmouseover="this.style.background='rgba(255, 184, 77, 0.2)'"
          onmouseout="this.style.background='rgba(255, 184, 77, 0.1)'"
        >
          + Add Press Action
        </button>
      </div>

      <!-- Double Tap Actions -->
      <div>
        <div style="
          font-family: var(--font-technical);
          font-size: 11px;
          font-weight: 500;
          letter-spacing: 0.15em;
          text-transform: uppercase;
          color: var(--color-silver);
          margin-bottom: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        ">
          <span style="
            display: inline-block;
            width: 6px;
            height: 6px;
            background: #8ab4f8;
            border-radius: 50%;
          "></span>
          Double Tap Actions
        </div>
        <div id="doubletap-actions">
          {{#each button.logic.actions.doubleTap}}
            <div style="
              background: var(--color-carbon);
              border: 1px solid rgba(139, 180, 248, 0.1);
              border-radius: 2px;
              padding: 1rem 1.25rem;
              margin-bottom: 0.75rem;
            ">
              <div style="margin-bottom: 1rem;">
                <label style="
                  display: block;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: var(--color-silver);
                  margin-bottom: 0.5rem;
                ">Load Path</label>
                <select
                  name="logic.doubleTapActions[{{@index}}].loadFullPath"
                  required
                  style="
                    width: 100%;
                    background: var(--color-slate);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 2px;
                    padding: 0.75rem 1rem;
                    font-family: var(--font-technical);
                    font-size: 11px;
                    color: var(--color-pearl);
                    cursor: pointer;
                  "
                  onfocus="this.style.borderColor='#8ab4f8'; this.style.boxShadow='0 0 0 2px rgba(139, 180, 248, 0.1)'"
                  onblur="this.style.borderColor='rgba(255, 255, 255, 0.08)'; this.style.boxShadow='none'"
                >
                  {{#each ../allLoads}}
                    <option value="{{this.fullPath}}" {{#if (eq this.fullPath ../loadFullPath)}}selected{{/if}} style="background: var(--color-slate); color: var(--color-pearl);">
                      {{this.location.area}} › {{this.location.room}} › {{this.zone}}
                    </option>
                  {{/each}}
                </select>
              </div>
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Level (%)</label>
                  <input
                    type="number"
                    name="logic.doubleTapActions[{{@index}}].commandLevel"
                    value="{{commandLevel}}"
                    min="0"
                    max="100"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Fade (s)</label>
                  <input
                    type="number"
                    name="logic.doubleTapActions[{{@index}}].fadeTime"
                    value="{{fadeTime}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
                <div>
                  <label style="
                    display: block;
                    font-family: var(--font-technical);
                    font-size: 9px;
                    letter-spacing: 0.12em;
                    text-transform: uppercase;
                    color: var(--color-silver);
                    margin-bottom: 0.5rem;
                  ">Delay (s)</label>
                  <input
                    type="number"
                    name="logic.doubleTapActions[{{@index}}].delay"
                    value="{{delay}}"
                    min="0"
                    step="0.1"
                    required
                    style="
                      width: 100%;
                      background: var(--color-slate);
                      border: 1px solid rgba(255, 255, 255, 0.08);
                      border-radius: 2px;
                      padding: 0.75rem 1rem;
                      font-family: var(--font-technical);
                      font-size: 11px;
                      color: var(--color-pearl);
                    "
                  />
                </div>
              </div>
              <button
                type="button"
                onclick="this.parentElement.remove()"
                style="
                  margin-top: 0.75rem;
                  background: rgba(255, 77, 77, 0.1);
                  border: 1px solid rgba(255, 77, 77, 0.3);
                  border-radius: 2px;
                  padding: 0.5rem 1rem;
                  font-family: var(--font-technical);
                  font-size: 9px;
                  letter-spacing: 0.12em;
                  text-transform: uppercase;
                  color: #ff6b6b;
                  cursor: pointer;
                  transition: all 0.2s ease;
                "
              >
                Remove
              </button>
            </div>
          {{/each}}
        </div>
        <button
          type="button"
          hx-get="/button/{{button.id}}/add-doubletap-action"
          hx-target="#doubletap-actions"
          hx-swap="beforeend"
          style="
            width: 100%;
            background: rgba(138, 180, 248, 0.1);
            border: 1px solid rgba(138, 180, 248, 0.3);
            border-radius: 2px;
            padding: 0.75rem;
            font-family: var(--font-technical);
            font-size: 10px;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: #8ab4f8;
            cursor: pointer;
            transition: all 0.2s ease;
          "
          onmouseover="this.style.background='rgba(138, 180, 248, 0.2)'"
          onmouseout="this.style.background='rgba(138, 180, 248, 0.1)'"
        >
          + Add Double Tap Action
        </button>
      </div>
    {{/if}}

    <button
      type="submit"
      style="
        width: 100%;
        background: linear-gradient(135deg, var(--color-amber) 0%, #e6a43d 100%);
        border: none;
        border-radius: 2px;
        padding: 1.25rem;
        font-family: var(--font-technical);
        font-size: 11px;
        font-weight: 500;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--color-void);
        cursor: pointer;
        box-shadow: var(--shadow-button);
        transition: all 0.2s ease;
        margin-top: 1rem;
      "
      onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(255, 184, 77, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)'"
      onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-button)'"
    >
      Save Changes
    </button>
  </form>
</div>
